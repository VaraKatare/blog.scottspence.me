---
path: /track-custom-events-with-fathom-analytics
date: 2019-12-31
title: Track Custom Events With Fathom Analytics
tags: ['information', 'learning', 'guide', 'hooks', 'react']
published: true
cover: ./cover.jpg
coverCredit: Photo by Aranxa Esteve on Unsplash
---

In this guide I'm going to go through how to track custom events in a
Gatsby site using Fathom analytics.

## Preamble

At the end of last month (November 2019) I started using [Fathom
Analytics] in place of Google Analytics.

I wanted a simpler way to track visitors to my sites and Fathom offers
that with a great, really intuitive interface and simple design.

So far, I love it, and would like to recommend it to others! Fathom
have an awesome affiliate program where every customer can take part!

For every paying customer I refer with [my unique code], I'll get a
25% lifetime commission on that customers payments, and if you use
that code too [you'll get a \$10 discount on your first invoice].

For now here's some of the Fathom marketing copy.

## Why Fathom?

- You don't need to display those cookie notices as they don't use
  cookies, nor do they track invasive data.

- They are focused on privacy for website visitors, they don't track
  visitors, save their personal information, or need it to be
  profitable.

- They have hundreds of customers and track tens of millions of page
  views per month, so they may be a small company, but they're doing
  big things!

- They can handle viral content, so your site won't slow down because
  of them, an they wont ever stop tracking for you because of a spike
  in popularity.

- All of the plans allow for unlimited websites to be tracked and
  receive top-notch customer support. Plans start at \$14 a month.

Do you use Google Analytics (GA) for any of your sites? I've used it
in the past and it gives the sort of information you'd expect but it
can be quite confusing to navigate and find that information.

What you get with Fathom out of the box is very similar to GA, but
it's all there on one page. You get the standard metrics like, 'Unique
visits', 'Page views', 'Avg time on site' and 'Bounce rate'.

There's also the breakdown of the most popular pages and referring
sites.

The difference (apart from the simple to use interface), you're not
giving away your visitors data to the big G!

> Want to track what users of your site are clicking and navigating
> to?

But say you want to track how many times a user of your site clicked a
particular button or link?

In GA you'd do something like use Google Tag Manager or code and event
tracking script (like I'm going to do here!).

## Config Fathom for use in Gatsby

I'm presuming you already have Fathom configured for your site but if
you don't and you want to then there's a [Gatsby plugin for Fathom]
that is very similar to the Google Analytics plugin you get for
Gatsby.

You `yarn` or `npm` install the plugin and and configure the specific
site you want to track. By that I mean you have to add a new site to
your [Fathom dashboard] and use that code in the configuration of the
plugin.

In your `gatsby-config.js` plugins array the config should like this:

```js
{
  resolve: `gatsby-plugin-fathom`,
  options: {
    siteId: process.env.GATSBY_FATHOM_TRACKING_ID_MY_AWESOME_SITE,
    // or use the site ID in plaintext
    // siteId: 'PBZRRJHH',
  },
},
```

## Tracking Events with Fathom

To track events in Fathom you'll first need to set up a goal! This
will give you a unique ID that you can pass to the Fathom global
function that's on the configured site.

We're going to use the React context API

```js
import React, { createContext, useContext, useEffect } from 'react';

const AnalyticsContext = createContext({});

export const AnalyticsProvider = ({ children }) => {
  useEffect(() => {
    if (typeof window.fathom === 'undefined') {
      window.fathom = (x, y, z) => {
        console.log(`I'm a fake Fathom`, x, y, z);
      };
    }
  }, []);

  const events = {
    logNavigation: goalId => {
      window.fathom('trackGoal', goalId, 0);
    },
  };
  return (
    <AnalyticsContext.Provider value={events}>
      {children}
    </AnalyticsContext.Provider>
  );
};

export const useAnalytics = () => {
  return useContext(AnalyticsContext);
};
```

As high up the component tree as possible, add the provider.

```js
import { AnalyticsProvider } from '../contexts/fathom-event-tracking';
```

Then use in the areas you want passing in the Fathom Goal you created.

```js
export const NavItems = () => {
  const analytics = useAnalytics();
  return (
    <>
      <NavLink
        href={`#about`}
        onClick={() => analytics.logNavigation('RC4QULF8')}>
        About
      </NavLink>
      <NavLink
        href={`#portfolio`}
        onClick={() => analytics.logNavigation('H9UEFCBF')}>
        Portfolio
      </NavLink>
    </>
  );
};
```

<!-- Links -->

[fathom analytics]: https://usefathom.com/
[you'll get a \$10 discount on your first invoice]:
  https://usefathom.com/ref/HG492L
[my unique code]: https://usefathom.com/ref/HG492L
[gatsby plugin for fathom]:
  https://www.gatsbyjs.org/packages/gatsby-plugin-fathom/
[fathom dashboard]: https://app.usefathom.com/#/settings/sites
