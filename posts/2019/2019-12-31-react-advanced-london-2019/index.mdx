---
path: /react-advanced-london-2019
date: 2019-12-31
title: React Advanced - London 2019
tags: ['conferences', 'react']
published: true
cover: ./cover.jpg
coverCredit: Photo by Tyler Casey on Unsplash
---

React Advanced London going deep!

## Ken Wheeler - React Performance

Ken's keynote didn't disappoint! Ken talks about how performance fixes
aren't prescriptive and it's more like a puzzle to figure out.

To help with this he prescribed the IMDOPE system!

> ### IMDOPE System
>
> - **I**dentify that a problem exists
> - **M**easure your timings
> - **D**evelop a plan
> - **O**pen dev tools
> - **P**lay around until its better
> - **E**njoy newly performant app

Ken detailed an animation running at 60 frames per second and how that
appears on the performance tab.

The user Timings API (which I've never heard of) lets you define
precise performance marking that you can name and display in dev
tools.

**Example:**

```bash
performance.mark('mainthread-start')
# do expensive things for performance
performance.mark('mainthread-stop')
performance.measure('mainthread', 'mainthread-start', 'mainthread-stop')
```

React does not control renders by default, very often problems
relating to performance are related to unnecessary renders.

React is _generally_ not great when you have a lot of components
rendering and re-rendering at the same time (cough React Memo!)

The React dev tools profiler got a mention and there was a demo of how
react will re-render all the things if you have many components in a
view using the React dev tools profiler.

There was an amusing part where when trying to demo the `useCallback`
React API where Ken missed out the second argument and had to consult
the React docs to clarify.

> "as developers almost everything we do is building elaborate lists
> of shit"
>
> `-` Ken Wheeler

List should be virtualized, check out Brian Vaughn's [React Window] or
[React Virtualized] he went on to render lists with 10k plus items in
there and demoed the shoddy performance on a rendered list then with
react window.

**Web Workers**

A particularly interesting section for me (because I didn't know it
was a thing), with web workers you can take expensive tasks off of the
main thread.

There are some downsides to this relating to serialization though.

**WASM**

He finished up with an auto tune example made with Rust and a Google
audio worklet to process a stream of audio to do the Daft Punk "one
more time" vocoder example! Dope!

`youtube: t8svxxtUTl8`

## Sean Wang - React (with hooks) from scratch

Bonkers talk from Sean where he recreated React with Hooks and React
Concurrency (Fibre) in a [CodeSandbox.io] session.

The talk was a sequel to a previous talk on [React hooks from scratch]
in 29 lines. He started with "we're going to re-create concurrent
React in 130 lines of code!".

At blazing fast speed he covered many concepts, a lot I was unfamiliar
with relating to React, topics covered:

- React Fiber
- "Rendering"
- Linked List Traversal
- Reconciliation vs Commit
- `useState` hook
- Work loop
- Suspense

First, the POJO! (Plain Old JavaScript Object):

```js
const element = {
  type: 'h1',
  props: {
    children: 'Hello world',
  },
};
```

Then went on to define what a fiber was, which is an extension on the
POJO:

```js
const element = {
  type: 'h1',
  props: {
    children: 'Hello world',
  },
  dom: domNode,
  parent: parentFiber,
  child: childFiber,
  sibling: null,
  alternate: currentFiber,
  effectTag: PLACEMENT,
  hooks: [],
};
```

I'll be honest, the speed at which Sean went, although very concise
was quite though to follow at times.

He covered all the main sections along with code examples. TL;DR
suspense with time slicing is here.

The only dependency used in the code was Babel with this [fetch
example] where the we're using state and reading from a resource which
suspends (or caches) as needed.

`youtube: dFO4m7Y-yhs`

## Vojtech Miksu - What a Drag

Vojtech (Uber) goes through the history lesson about drag and drop and
the complexities that come with it.

He details the options available and why they implemented their own
[React Movable] Accessible drag and drop project.

`youtube: y_XkQ2qMTSA`

Here's the same talk from RSCONF 2019:

`youtube: 373pc0AbR9M`

## Daniel Irvine - Donâ€™t Let Your Unit Tests Slow You Down

Six ideas that can help improve your testing.

<!-- | Developer Tests             | QA tests                      |
| --------------------------- | ----------------------------- |
| Encode requirements         | Encode requirements           |
| Catch regression            | Catch regression              |
| Assist with design          | Catch performance degradation |
| Guide refactoring           | Check usability               |
| Explain your code to others |                               |
| Pinpoint errors             |                               |
| Minimise debugging          |                               |
| Minimise manual testing     |                               | -->

**Idea 1:**

Always follow _Arrange Act Assert_, get the variables in place,
render, expected result.

Keep tests simple

**Idea 2:**

Test the _lifecycle_ of your components.

**Idea 3:**

Be aware of tests surface areas, good test pinpoint errors.

**Idea 4:**

Make a mess, then refactor.

**Idea 5:**

Get out of React components at every opportunity. Testing simple
functions, simple, React component, not so simple to test.

**Idea 6:**

Write your own test library! ðŸ˜±

It will help you understand the DOM better and further your
learning!!!

Library's lock you into _their_ way of testing things.

**Main takeaway for me from this is:**

> No tests are better than bad tests!

`youtube: 1vDXRDQ9aJE`

After this talk I was off to the React native hall to go see some of
the lightening talks as I knew one of the speakers.

## Lightning talks - Various presenters

Jamie Barton - share more!

## Siddharth Kshetrapal - Design Systems Design System

`youtube: Dd-Y9K7IKmk`

## Emma Brillhart - A More Readable React Codebase Using TypeScript, GraphQL, and Hooks

`youtube: nkJbGgieALI`

<!-- Links -->

Complete playlist of all the talks on YouTube [here].

Check the [hashtag] on Twitter and also [my coverage] on Twitter.

https://twitter.com/search?q=spences10%20reactadvanced&f=live

[codesandbox.io]: https://codesandbox.io
[fetch example]: https://codesandbox.io/s/reactadvanced-final-uwrx0
[react virtualized]: https://github.com/bvaughn/react-virtualized
[react window]: https://github.com/bvaughn/react-window
[react hooks from scratch]: https://www.swyx.io/speaking/react-hooks/
[react movable]: https://github.com/tajo/react-movable
[here]:
  https://www.youtube.com/playlist?list=PLNBNS7NRGKMH7yfpYQD4TrFV25SMOCIPM
[hashtag]: https://twitter.com/hashtag/ReactAdvanced
[my coverage]:
  https://twitter.com/search?q=reactadvanced%20spences10&f=live
